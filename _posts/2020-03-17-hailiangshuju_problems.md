---
layout:     post
title:      面试海量数据问题
subtitle:   2021 暑期实习
date:       2019-12-17
author:     王鹏程
header-img: img/post-bg-ios10.jpg
catalog: true
tags:
    - 暑期
    - 后台开发
    - 面试
---

# 面试中的海量数据处理问题总结:

_参考链接:_

- [面试海量数据处理题总结](https://blog.csdn.net/qq_41058526/article/details/89313852)
- [十道海量数据处理面试题与十个方法大总结](https://blog.csdn.net/v_july_v/article/details/6279498/)
- [海量数据面试总结](https://zhuanlan.zhihu.com/p/65061096)
- [刷掉 90% 候选人的互联网大厂海量数据面试题（附题解 + 方法总结）](https://zhuanlan.zhihu.com/p/93565488)



## 1. N个数求前K大

- 快排pivot
- 计数排序，开辟一个大数组，记录每个整数出现的次数，从大到小取（bitmap）
- 维护一个大小为k的大根堆



## 2. 求文件A中没有但B中有的单词(字典树)

- 遍历文件A，将文件hash到n个小文件中
- 对B文件同样操作
- 然后对于每一对文件，进行hash操作

## 3. 海量数据排序问题

- hash到小文件中，然后在小文件排序。然后合并的时候，用堆，每个小文件取一个，然后最小的拿走再加入对应文件的数字，直到结束。
- 如果要求文件IO次数尽量少，比如：一个文件中20亿个int，有重复但不超过10000个，排序后输出到另一个文件（要求减少文件IO）



## 4. 海量数据出现次数最多数据

- hash进行文件分发
- 但是内存有限制的话，可以先分段到小文件中，然后再hash
- 直接hash到小文件，再在小文件hash，避免集中在一个区间造成退化
- 如果数据给的是40亿都是一个数字，那这个数字的index计数就会爆掉（int最大21亿左右），可以把初始值设置为-21亿
- 如果增加到80亿呢？一边遍历一边判断，如果超过40亿，也不可能有比它更多的了，直接返回

## 5. 40亿整数，再给一个新数字，判断是否在40亿当中

- 分布式机器，多台机器一起查找并合并
- bitmap，注意不是40亿个数字就要40亿个位，而是都是整数，所以覆盖所有整数范围就是2^32大概42亿，所以需要申请2^32个位，一个int8个位，所以需要2^29个int，占用500M内存



## 6. 10亿个数值，找最大的一万个？

应该计算一下这个数组整体大小，然后询问数据是否重复，如果重复，先对文件hash，然后保存不同文件。维持一个1万的小顶堆，遍历效率是o(nlogn)